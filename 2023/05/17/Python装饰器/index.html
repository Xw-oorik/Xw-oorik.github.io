


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>  Pythonè£…é¥°å™¨ğŸ |    Oorik.</title>
  <meta name="description" content="A minimalist theme for hexo.">
  <!-- æ ‡ç­¾é¡µå›¾æ ‡ -->
  
  <link rel="shortcut icon" href="https://icons.bootcss.com/icons/emoji-dizzy/" type="image/x-icon">
  

  <!-- å›¾æ ‡åº“ -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
  <!-- åŠ¨ç”»åº“ -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fushaolei/cdn-white@1.0/css/animate.css"/>
  
  <!-- cssæ–‡ä»¶ -->
  
<link rel="stylesheet" href="/css/white.css">

  <!-- ä»£ç é«˜äº® -->
  
    
      
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.1/styles/github.css">

    
  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>

<div class="menu-outer">
    <div class="menu-inner">
      <div class="menu-site-name  animate__animated  animate__fadeInUp">
        <a href="/">
          Oorik.
        </a>
        
      </div>
      <div class="menu-group">
        <ul class="menu-ul">
        
          <a href="/" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              HOME
            </li>
          </a>
        
          <a href="/archives" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              BLOG
            </li>
          </a>
        
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="sort">
             CATEGORIES
             <div class="categories-outer " id="sort-div">
               <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Life/">Life</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tips/">Tips</a></li></ul>
             </div>
          </li>
        
        
        <a href="/search">
          <li class="menu-li  animate__animated  animate__fadeInUp">
            <i class="ri-search-line"></i>
          </li>
        </a>
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="mobile-menu">
            <i class="ri-menu-line"></i>
          </li>
        
        </ul>

      </div>

    </div>
</div>
<div id="mobile-main" class="animate__animated  animate__fadeIn">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-site-name animate__animated  animate__fadeInUp">
      <a href="/">
        Oorik.
      </a>
    </div>
    <div class="mobile-menu-group" id="mobile-close">
      <i class="ri-close-line"></i>
    </div>

  </div>

  <div class="mobile-menu-div">
  
    <a href="/" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>HOME</span>
      </div>
    </a>
  
    <a href="/archives" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>BLOG</span>
      </div>
    </a>
  
  
    <a href="/search">  
      <div class="mobile-menu-child  animate__animated  animate__fadeInUp">
        <i class="ri-search-line"></i>
      </div>
    </a>
    
  </div>


</div>

<div class="body-outer">
  <div class="body-inner">
    
<article class="post-inner">
  <div class="post-content-outer">
    <div class="post-intro">
      <div class="post-title animate__animated  animate__fadeInUp">Pythonè£…é¥°å™¨ğŸ</div>
      <div class="meta-intro animate__animated  animate__fadeInUp">May 17 2023</div>
      
    </div>
    <div class="post-content-inner">
      <div class="post-content-inner-space">

      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- topå‹ç›®å½• -->
        
        <h1 id="é”…å·´pyğŸ¤‘"><a href="#é”…å·´pyğŸ¤‘" class="headerlink" title="é”…å·´pyğŸ¤‘"></a>é”…å·´pyğŸ¤‘</h1><h2 id="Pythonå°ç™½æ€çŒªåˆ€ï¼Œè£…é¥°å™¨"><a href="#Pythonå°ç™½æ€çŒªåˆ€ï¼Œè£…é¥°å™¨" class="headerlink" title="Pythonå°ç™½æ€çŒªåˆ€ï¼Œè£…é¥°å™¨"></a><font color=Peach>Pythonå°ç™½æ€çŒªåˆ€ï¼Œè£…é¥°å™¨</font></h2><p><strong>è£…é¥°å™¨</strong>çš„ä½œç”¨å°±æ˜¯ä¸ºå·²ç»å­˜åœ¨çš„å¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œä½ è‚¯å®šå¬ç€å¾ˆæ‡µé€¼ï¼Œä¸‹é¢ä»ä¾‹å­å¸¦ä½ äº†è§£ä»–çš„åŸç†</p>
<p><strong>go~~</strong></p>
<h3 id="plus1"><a href="#plus1" class="headerlink" title="plus1:"></a>plus1:</h3><p>ç°åœ¨æœ‰å¦‚ä¸‹å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªå‡½æ•°çš„æ—¥å¿—æ‰“å°åˆ°ç»ˆç«¯</p>
<pre><code class="python">def add(x,y):
    print(&#39; æˆ‘è¢«è°ƒç”¨æ‰§è¡Œå•¦ &#39;)  # æ–°å¢æ‰“å°æ—¥å¿—è¯­å¥
    return x + y

add(100,200)

# è¾“å‡º
 æˆ‘è¢«è°ƒç”¨æ‰§è¡Œå•¦
</code></pre>
<p>ä½†æ˜¯ä»”ç»†æ€è€ƒï¼Œæ‰“å°æ—¥å¿—æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå®ƒå’Œ add å‡½æ•°æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå…³è”å…³ç³»ï¼Œæˆ‘ä»¬è¯´ä¸€ä¸ªå‡½æ•°æ˜¯ä¸ºå®Œæˆä¸€ä¸ªå·¥ç¨‹çš„ï¼Œæ‰€ä»¥ç›´æ¥å†™åœ¨å‡½æ•°é‡Œé¢ä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯ä¸å»ºè®®ï¼Œå¹¶ä¸”æ‰“å°æ—¥å¿—å±äºè°ƒè¯•ä¿¡æ¯åŠŸèƒ½ï¼Œä¸ä¸šåŠ¡æ— å…³ï¼Œä¸åº”è¯¥æ”¾åœ¨ä¸šåŠ¡å‡½æ•°åŠ æ³•ä¸­ã€‚<br>â€ƒâ€ƒå¦‚æœä¸éœ€è¦å†™åœ¨å‡½æ•°çš„é‡Œé¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—æƒ³åŠæ³•å†™åœ¨å‡½æ•°çš„å¤–é¢ã€‚</p>
<pre><code class="python">def add(x, y):
    return x + y

def logger(fn, x, y):
    print(&#39; å‡½æ•°å¼€å§‹æ‰§è¡Œ &#39;)
    res = fn(x, y)
    print(&#39; å‡½æ•°æ‰§è¡Œå®Œæ¯• &#39;)
    return res

logger(add,4,5)
</code></pre>
<ul>
<li>è¿™æ ·å°±è§£å†³äº†æ‰“å°è¯­å¥åœ¨å‡½æ•°å†…å®šä¹‰çš„é—®é¢˜äº†ã€‚</li>
<li>ä½†æ˜¯å¦‚æœ add å‡½æ•°çš„å½¢å‚å¾ˆå¤šï¼Œæˆ‘ä»¬è¦æŒ¨ä¸ªå†™ä¸Šå—ï¼Ÿæ‰€ä»¥ * args,**kwargs å¸®äº†æˆ‘ä»¬å¾ˆå¤§çš„å¿™</li>
</ul>
<pre><code class="python">def add(x, y):
    return x + y

def logger(fn, *args, **kwargs):
    print(&#39; å‡½æ•°å¼€å§‹æ‰§è¡Œ &#39;)
    res = fn(*args, **kwargs)
    print(&#39; å‡½æ•°æ‰§è¡Œå®Œæ¯• &#39;)
    return res

logger(add,4,5)
</code></pre>
<hr>
<h3 id="plus2"><a href="#plus2" class="headerlink" title="plus2:"></a>plus2:</h3><p>æœ‰ä¸ªä¸“ä¸šæœ¯è¯­å«åš<strong>æŸ¯é‡ŒåŒ–</strong>ï¼ˆè‹±è¯­ï¼šCurryingï¼‰ï¼Œåˆè¯‘ä¸ºå¡ç‘åŒ–æˆ–åŠ é‡ŒåŒ–ï¼Œæ˜¯æŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°çš„æŠ€æœ¯ã€‚ï¼ˆæ¥è‡ªç»´åŸºç™¾ç§‘ï¼‰</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼šæŸ¯é‡ŒåŒ–æŒ‡çš„å°±æ˜¯å°†åŸæ¥æ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å˜æˆæ–°çš„æ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„è¿‡ç¨‹ã€‚æ–°çš„å‡½æ•°è¿”å›ä¸€ä¸ªä»¥åŸæœ‰ç¬¬äºŒä¸ªå‚æ•°ä¸ºå‚æ•°çš„å‡½æ•°ã€‚å…¶æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š</p>
<pre><code class="python">z = f(x, y) 
# è½¬æ¢æˆ 
z = f(x)(y) 
# çš„å½¢å¼
</code></pre>
<p>è¿™é‡ŒæŠŠç»å…¸çš„ add å‡½æ•°æ‹¿æ¥è¿›è¡Œè½¬æ¢ï¼š</p>
<p>æƒ³è¦è½¬æ¢ä¸º add(4)(5)ï¼Œé‚£ä¹ˆ add(4) å¿…é¡»è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦åˆ™æ— æ³•å°† 5 å½“ä½œå‚æ•°ä¼ å…¥</p>
<pre><code class="python">def add(x, y):
    return x + y

def new_add(x):
    def inner(y):
        return x + y
    return inner

print(add(4, 5))     # 9
print(new_add(4)(5)) # 9
print(add(4, 5) == new_add(4)(5))  # True
</code></pre>
<p>å…¶å®å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¥—å‡½æ•°çš„æŠ€å·§ã€‚</p>
<hr>
<h3 id="plus3"><a href="#plus3" class="headerlink" title="plus3:"></a>plus3:</h3><p>å¯¹äºæœ€å¼€å§‹æ¡ˆä¾‹çš„å‡½æ•°è°ƒç”¨ç»™å¤–äººçœ‹å¤ªä¸‘äº†å§ï¼Œå› æ­¤pythonå¼•å…¥äº†æŸ¯é‡ŒåŒ–è¿™ç§æ€æƒ³ï¼Œæˆ‘ä»¬å»æ”¹è¿›ä¸€ä¸‹ä¸Šé¢çš„add,loggeræ¡ˆä¾‹ï¼Œè®©ä»–å˜çš„æ›´ç¾è§‚ï¼Œæ›´ä¼˜é›…</p>
<p>ç»“åˆplus2çš„æŸ¯é‡ŒåŒ–å»æ”¹è¿›plus1</p>
<pre><code class="python">def add(x,y):
    return x+y

def logger(fn):
    def wrapper(*args,**kwargs):
        print(&quot;å‡½æ•°è¢«æ‰§è¡Œäº†&quot;)
        res=fn(*args,**kwargs)
        print(&quot;å‡½æ•°æ‰§è¡Œå®Œæ¯•&quot;)
        return res
    return wrapper

logger(add)(4,5)  
 #-&gt;fnæ¥æ”¶addå‡½æ•°åï¼Œ(4,5)æ˜¯addå‚æ•°ï¼Œè¢«wrapper(*args,**kwargs)æ¥æ”¶
 #å…¶å®wrapperå‡½æ•°å°±æˆäº†addå‡½æ•°
</code></pre>
<p>â€‹	è¿™æ ·çœ‹èµ·æ¥æ˜¯ä¸æ˜¯å°±å¥½çœ‹å¤šäº†ï¼Ÿå½“æŒ‡å®š logger(add)(4,5) æ—¶ï¼Œæ‰ä¼šæ‰“å°æ—¥å¿—ï¼Œä½†å¦‚æœæƒ³è¦åœ¨æ‰€æœ‰è°ƒç”¨ add å‡½æ•°çš„åœ°æ–¹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æ‰€æœ‰è°ƒç”¨ add çš„åœ°æ–¹ä¿®æ”¹ä¸º logger(add)(å‚æ•°), æƒ³ä¸€æƒ³ï¼Œ<strong>å¦‚æœæˆ‘èƒ½æŠŠ logger(add) å˜æˆ add æ˜¯ä¸æ˜¯å°±å¯ä»¥ç›´æ¥å†™æˆ add(4,5) äº†å‘¢ï¼Ÿ</strong><br>â€‹	å…¶å®ä¸Šé¢çš„è°ƒç”¨å½¢å¼å°±ç­‰äºå¦‚ä¸‹ï¼š</p>
<pre><code class="python">logger(add)(4,5)
--------
add = logger(add)
add(4,5)    # å°† add é‡æ–°æŒ‡å‘äº†æ–°çš„å‡½æ•° wrapper
</code></pre>
<p>â€‹	æŒ‰ç…§æŸ¯é‡ŒåŒ–çš„åŸå‹ä¸­ logger(add) è¿”å›äº†ä¸€ä¸ªå‡½æ•° wrapperï¼Œè€Œæˆ‘ä»¬çš„(4,5) å…¶å®æ˜¯ä¼ é€’ç»™äº† wrapperï¼Œç»“åˆæˆ‘ä»¬å‰é¢æ‰€å­¦çš„é«˜é˜¶å‡½æ•°ï¼Œè¿™é‡Œçš„ wrapperï¼Œæ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œå› ä¸ºåœ¨å†…éƒ¨å¯¹ fn è¿›è¡Œäº†æ‰§è¡Œï¼Œè¿™ä¸ªfnæ¥æ”¶çš„å°±æ˜¯addå‡½æ•°åï¼Œè°ƒçš„å°±æ˜¯addå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œ wrapper çš„åŒæ—¶ï¼Œä¹Ÿä¼šæ‰§è¡ŒåŸæ¥çš„å‡½æ•° fn(add)ï¼Œå¹¶ä¸”wrapperæ·»åŠ äº†æ‰“å°æ—¥å¿—çš„åŠŸèƒ½</p>
<p>è¿™æ ·å½¢å¼çš„logger å‡½æ•°å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨å‡½æ•°ï¼ï¼ï¼è£…é¥°äº†addå‡½æ•°</p>
<hr>
<p>å½“ç„¶çœ‹å¾ˆå¤šå…¬å¸ä»£ç æˆ–è€…æ¡†æ¶æºç çš„æ—¶å€™éƒ½ä¸ä¼šè¿™ä¹ˆå¤æ‚çš„è°ƒç”¨ï¼Œä»–ä¼šåˆ©ç”¨åˆ°è¯­æ³•ç³–@å»ç®€åŒ–è°ƒç”¨ä¹¦å†™ï¼Œ<strong>ä¸€ä¸ª@ä¿®é¥°ç¬¦å°±æ˜¯ä¸€ä¸ªå‡½æ•°ã€æ ¼å¼ï¼š*@ä¿®é¥°å*ã€‘</strong>ï¼Œå®ƒå°†è¢«ä¿®é¥°çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¿®é¥°åçš„åŒåå‡½æ•°æˆ–å…¶ä»–å¯è°ƒç”¨çš„ä¸œè¥¿ï¼ˆå¦‚æœè¿”å›ä¸æ˜¯ä¸€ä¸ªå¯è°ƒç”¨çš„å¯¹è±¡é‚£ä¹ˆä¼šæŠ¥é”™ï¼‰</p>
<p>æ³¨æ„æ³¨æ„ï¼Œpythoné‡Œé¢çš„å˜é‡åï¼Œå˜é‡åï¼çœ‹ä¸Šé¢çš„ä¾‹å­return wrapperï¼Œå°±æ˜¯è¿”å›äº†è¿™ä¸ªå‡½æ•°åï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬åé¢è‡ªå·±å»è°ƒç”¨ï¼Œï¼Œæœ‰çš„äººæŸ¥èµ„æ–™çœ‹åˆ°è¯´@è¯­æ³•ç³–ä¼šè‡ªå·±ç›´æ¥æ‰§è¡Œè°ƒç”¨ï¼Œçº¯å±æ‰¯æ·¡ï¼Œè‡ªå·±è°ƒæ˜¯å› ä¸ºä»–è£…é¥°å™¨å‡½æ•°æœ€åè¿”å›äº†ä¸€ä¸ªå‡½æ•°è°ƒç”¨(),è€Œä¸”æ˜¯æ²¡å‚æ•°çš„é‚£ç§å‡½æ•°ï¼Œï¼Œå½“ç„¶ä½ ç›´æ¥å¸¦å®å‚ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œï¼Œä¸è¿‡æ¨èå°±è¿”å›å‡½æ•°åï¼Œä¸‹æ°‘è‡ªå·±è°ƒï¼Œè‡ªå·±æŠŠæ¡æ—¶æœº</p>
<p><strong>ä¸¾ä¸‰ä¸ªä»£ç ä¾‹å­å°±è¡Œï¼š</strong></p>
<p>æ— å‚çš„ï¼Œè¿”å›å‡½æ•°è°ƒç”¨ï¼š</p>
<pre><code class="python">def logger(fn):
    def wrapper():
        print(&quot;å‡½æ•°è¢«æ‰§è¡Œäº†&quot;)
        res=fn()
        print(&quot;å‡½æ•°æ‰§è¡Œå®Œæ¯•&quot;)
        return res
    return wrapper()  #æ³¨æ„è¿™é‡Œ
 
@logger            #ä¸ç”¨æˆ‘ä»¬å»è°ƒç”¨ï¼Œè‡ªåŠ¨è°ƒç”¨è¿”å›äº†
def add():
    print(&quot;add&quot;)
</code></pre>
<p>è¿”å›å‡½æ•°åï¼š</p>
<pre><code class="python">def logger(fn):
    def wrapper():
        print(&quot;å‡½æ•°è¢«æ‰§è¡Œäº†&quot;)
        res=fn()
        print(&quot;å‡½æ•°æ‰§è¡Œå®Œæ¯•&quot;)
        return res
    return wrapper  #æ³¨æ„è¿™é‡Œ
 
@logger
def add():
    print(&quot;add&quot;)
    
    
add()#è‡ªå·±è°ƒç”¨ä¸€ä¸‹
</code></pre>
<p>å¸¦å‚çš„è¿”å›å‡½æ•°è°ƒç”¨ï¼šéœ€è¦æˆ‘ä»¬è‡ªå·±å»æŒ‡å®šå®å‚</p>
<pre><code class="python">def logger(fn):
    def wrapper(x,y):
        print(&quot;å‡½æ•°è¢«æ‰§è¡Œäº†&quot;)
        res=fn(x,y)
        print(&quot;å‡½æ•°æ‰§è¡Œå®Œæ¯•&quot;)
        return res
    return wrapper(2,5)  #æ³¨æ„è¿™é‡Œ
 
@logger
def add(x,y):
    print(&quot;add&quot;)
    print(x+y)
    return x+y
</code></pre>
<p>çœ‹åˆ°è¿™åº”è¯¥å°±å¯¹@+è£…é¥°å™¨æœ‰äº†åŸºç¡€äº†è§£äº†å§~~~</p>
<p>ä¸‹é¢æ¥ç€ä¸Šé¢loggerä¾‹å­æ·±å…¥è®²è£…é¥°å™¨+@ï¼Œæ”¹æˆå¦‚ä¸‹æ ·å­ï¼š</p>
<pre><code class="python">def logger(fn):
    def wrapper(*args, **kwargs):
        print(&#39; å‡½æ•°è¢«æ‰§è¡Œäº† &#39;)
        res = fn(*args, **kwargs)
        print(&#39; å‡½æ•°æ‰§è¡Œå®Œæ¯• &#39;)
        return res
    return wrapper

# ç­‰äº add = logger(add)ï¼Œï¼Œ@æ ‡è¯†loggeræ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œpythonè§£é‡Šå™¨ä¼šè‡ªå·±å»æ‰¾loggerå‡½æ•°
@logger
def add(x, y):
    return x + y

add(4,5)#ç›´æ¥è¿™ä¹ˆè°ƒç”¨ï¼Œå°±å¯ä»¥
</code></pre>
<blockquote>
<p>â€‹     <strong>å½“è§£é‡Šå™¨æ‰§è¡Œåˆ°<code>@logger</code>æ—¶ï¼Œä¼šè‡ªåŠ¨æŠŠå®ƒä¸‹é¢çš„å‡½æ•°å½“ä½œå‚æ•°ï¼Œä¼ ç»™ logger å‡½æ•°ï¼Œæ‰€ä»¥è¿™é‡Œ<code>@logger</code>å…¶å®å°±ç­‰äº<code>add = logger(add)</code> å¦å¤–ï¼Œlogger å¿…é¡»è¦å®šä¹‰åœ¨ add å‡½æ•°ä¹‹å‰æ‰å¯ä»¥è¢«è£…è½½ï¼è¿™ä¸€ç‚¹å¾ˆé‡è¦ï¼</strong></p>
</blockquote>
<hr>
<h3 id="ä¸‹é¢è¯´ä¸€ä¸‹å¯¹äºä½¿ç”¨è£…é¥°å™¨å¯ä»¥åšçš„ä¸€äº›æ”¹è¿›æˆ–è€…é—®é¢˜ï¼Ÿï¼Ÿ"><a href="#ä¸‹é¢è¯´ä¸€ä¸‹å¯¹äºä½¿ç”¨è£…é¥°å™¨å¯ä»¥åšçš„ä¸€äº›æ”¹è¿›æˆ–è€…é—®é¢˜ï¼Ÿï¼Ÿ" class="headerlink" title="ä¸‹é¢è¯´ä¸€ä¸‹å¯¹äºä½¿ç”¨è£…é¥°å™¨å¯ä»¥åšçš„ä¸€äº›æ”¹è¿›æˆ–è€…é—®é¢˜ï¼Ÿï¼Ÿ"></a>ä¸‹é¢è¯´ä¸€ä¸‹å¯¹äºä½¿ç”¨è£…é¥°å™¨å¯ä»¥åšçš„ä¸€äº›æ”¹è¿›æˆ–è€…é—®é¢˜ï¼Ÿï¼Ÿ</h3><p>åˆ©ç”¨è£…é¥°å™¨è®¡ç®—å¦‚ä¸‹å‡½æ•°çš„è¿è¡Œæ—¶é—´</p>
<pre><code class="python">import time
import datetime

def logger(fn):
    def wrapper(*args, **kwargs):
        start = datetime.datetime.now()
        res = fn(*args, **kwargs)
        duration = (datetime.datetime.now() - start).total_seconds()
        print(&#39; å‡½æ•°ï¼š&#123;&#125; æ‰§è¡Œç”¨æ—¶ï¼š&#123;&#125;&#39;.format(wrapper.__name__, duration))
        return res                    #è¿™é‡Œ__name__ è¡¨ç¤ºå½“å‰å‡½æ•°çš„åç§°.
    return wrapper

@logger
def add(x, y):
    time.sleep(2)
    return x + y

# æ‰§è¡Œç»“æœï¼š

In: add(4,5)
å‡½æ•°ï¼šwrapper æ‰§è¡Œç”¨æ—¶ï¼š2.000944
</code></pre>
<ul>
<li><p><input disabled="" type="checkbox"> 
ä»€ä¹ˆé¬¼ï¼Ÿè¿™é‡Œä¸ºä»€ä¹ˆæ‰“å°çš„æ˜¯ wrapper å•Šï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ add å‘¢ï¼Ÿè¿™æ ·çš„è¯ï¼Œåˆ«äººä¸å°±å‘ç°æˆ‘æŠŠè¿™ä¸ªå‡½æ•°ç»™å·å·æ¢æ‰äº†å—ï¼Ÿä¸è¡Œä¸è¡Œï¼Œæˆ‘å¾—æƒ³ä¸ªåŠæ³•æŠŠå‡½æ•°çš„å±æ€§å¤åˆ¶è¿‡æ¥ï¼Œç”±äºè¿™ä¸ªåŠŸèƒ½å’Œæ‰“å°ç”¨æ—¶çš„è£…é¥°å™¨ä¸æ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜å¾—ç»™è£…é¥°å™¨å†åŠ ä¸€ä¸ªè£…é¥°å™¨ã€‚-_-!</p>
<pre><code class="python">import time
import datetime

def copy_properties(old_fn):
    def wrapper(new_fn):
        new_fn.__name__ = old_fn.__name__
        return new_fn
    return wrapper

def logger(fn):
    @copy_properties(fn)  # wrapper = copy_properties(fn)(wrapper)
    def wrapper(*args, **kwargs):
        start = datetime.datetime.now()
        res = fn(*args, **kwargs)
        total_seconds = (datetime.datetime.now() - start).total_seconds()
        print(&#39; å‡½æ•°ï¼š&#123;&#125; æ‰§è¡Œç”¨æ—¶ï¼š&#123;&#125;&#39;.format(wrapper.__name__,total_seconds))
        return res
    return wrapper

@logger
def add(x, y):
    time.sleep(2)
    return x + y

add(4,5)
</code></pre>
</li>
</ul>
<ol>
<li>è§£é‡Šå™¨æ‰§è¡Œåˆ°<code>@copy_properties(fn)</code>æ—¶ï¼Œä¼šæŠŠä¸‹é¢çš„ wraper è£…å…¥ï¼Œç­‰äº<code>wrapper = copy_properties(fn)(wrapper)</code></li>
<li>addå°±ä¼šè·³åˆ°&#96;@copy_propertiesï¼Œç”¨addçš„åå­—old_fn.__name__èµ‹å€¼ç»™new_fn.__name__ï¼Œè¿”å›è¿™ä¸ªæ–°åå­—ï¼Œåé¢æ‹¿åˆ°çš„å°±æ˜¯è¿™ä¸ªè¢«æ›¿æ¢çš„åå­—ï¼ˆç‹¸çŒ«æ¢å¤ªå­äº†å±äºæ˜¯ï¼‰</li>
<li>ç”±äºçŸ¥é“äº†å‚æ•°çš„ä¸ªæ•°(ä¸€å®šæ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡)ï¼Œè¿™é‡Œå°±æ²¡æœ‰ä½¿ç”¨ * args, **kwargs</li>
<li>å‡½æ•°çš„å±æ€§ä¸æ­¢<code>__name__</code>ä¸€ä¸ªï¼Œå…¶ä»–çš„æ€ä¹ˆåŠå‘¢ï¼Ÿ</li>
</ol>
<hr>
<p>å½“ç„¶è¦æˆ‘ä»¬åœ¨å°è£…ä¸€ä¸ªè£…é¥°å™¨æœªå…å¤ªéº»çƒ¦äº†ï¼Œä»¥ç®€ä¾¿è‘—ç§°çš„pythonè´´å¿ƒçš„ä¸ºæˆ‘ä»¬æä¾›äº†æ‹·è´å‡½æ•°å±æ€§çš„å†…ç½®å‡½æ•°</p>
<h3 id="æ‹·è´å‡½æ•°å±æ€§"><a href="#æ‹·è´å‡½æ•°å±æ€§" class="headerlink" title="æ‹·è´å‡½æ•°å±æ€§"></a>æ‹·è´å‡½æ•°å±æ€§</h3><p>â€ƒâ€ƒPython çš„å†…ç½®æ¨¡å— functools ä¸­ï¼Œå†…ç½®äº†å¾ˆå¤šå¸¸ç”¨çš„é«˜é˜¶å‡½æ•°ï¼Œå…¶ä¸­ wraps å°±æ˜¯ç”¨æ¥æ‹·è´å‡½æ•°çš„å±æ€§åŠç­¾åä¿¡æ¯çš„ã€‚åˆ©ç”¨ wrapsï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦è‡ªå·±ç¼–å†™ copy_properties å‡½æ•°äº†ï¼Œä¸‹é¢æ˜¯ä¿®æ”¹åçš„ç‰ˆæœ¬ï¼š</p>
<pre><code class="python">import time
import datetime
import functools

def logger(fn):
    @functools.wraps(fn)  # wrapper = functools.wraps(fn)(wrapper)
    def wrapper(*args, **kwargs):
        start = datetime.datetime.now()
        res = fn(*args, **kwargs)
        total_seconds = (datetime.datetime.now() - start).total_seconds()
        print(&#39; å‡½æ•°ï¼š&#123;&#125; æ‰§è¡Œç”¨æ—¶ï¼š&#123;&#125;&#39;.format(wrapper.__name__,total_seconds))
        return res
    return wrapper

@logger
def add(x, y):
    time.sleep(2)
    return x + y

add(4,5)
</code></pre>
<ul>
<li><input disabled="" type="checkbox"> é€šè¿‡ä½¿ç”¨<code>@functools.wraps(fn)</code> æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„æ‹·è´å‡½æ•°çš„å±æ€§ç­¾åä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š<code>__module__</code>ã€<code>__name__</code>ã€<code>__qualname__</code>ã€<code>__doc__</code>ã€<code>__annotations__</code> ç­‰ï¼Œè¿™äº›å±æ€§ä¿¡æ¯ï¼Œå°†åœ¨åç»­éƒ¨åˆ†è¿›è¡Œè®²è§£ï¼Œè¿™é‡ŒçŸ¥é“å³å¯</li>
</ul>
<hr>
<p>ä¸Šé¢æ¼”ç¤ºçš„éƒ½æ˜¯å¸¦ä¸€ä¸ªå‚æ•°çš„è£…é¥°å™¨ï¼ŒPythonç§°è¿™ç§è£…é¥°å™¨ä¸ºæ— å‚è£…é¥°å™¨ï¼Œå› ä¸ºè¯­æ³•ç³–çš„è¡¨ç°å½¢å¼å°±æ˜¯ <code>@logger</code>, ä¸‹é¢è¦è¯´çš„æ˜¯å¸¦å‚æ•°çš„è£…é¥°å™¨ï¼Œå³ <code>@logger(args)</code></p>
<p>ä»¥ä¸Šè¿°å‡½æ•°ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦è®°å½•å½“å‡½æ•°æ‰§è¡Œè¶…è¿‡ä¸€å®šæ—¶é—´æ—¶çš„æ—¥å¿—ä¿¡æ¯ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå‡è®¾è¿™ä¸ªæ—¶é—´æ˜¯ 5 ç§’ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªæ—¶é—´å˜é‡ä¼ å…¥åˆ°è£…é¥°å™¨ä¸­è¿›è¡Œåˆ¤æ–­ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å†™æˆè¿™ç§å½¢å¼ï¼š</p>
<pre><code class="python">logger(5)(add)(4,5)
</code></pre>
<blockquote>
<p>loggerï¼ˆ5ï¼‰è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œï¼Œå…¶å®æ˜¯å‡½æ•°åï¼Œï¼Œä¹‹åè¿™ä¸ªå‡½æ•°åå†(add)ï¼Œç­‰äºæŠŠaddå½“å‚æ•°ä¼ è¿›å»ï¼Œåé¢è·Ÿç€addçš„å‚æ•°ï¼ˆ4,5ï¼‰ï¼Œ</p>
</blockquote>
<pre><code class="python">import time
import datetime
import functools

def logger(var):# loggerçš„å‚æ•°
    def inner(func): #æ¥æ”¶add
        def wrapper(*args, **kwargs):
            start = datetime.datetime.now()
            res = func(*args, **kwargs)
            total_seconds = (datetime.datetime.now() - start).total_seconds()
            if total_seconds &gt; var:
                print(&#39; å‡½æ•°æ‰§è¡Œæ—¶é—´è¿‡é•¿ &#39;)
            return res
        return wrapper
    return inner

@logger(5)  # logger(5)(add)(4,5)
def add(x, y):
    time.sleep(6)
    return x + y

add(4,5)
#ç­‰äºä¸è¦@è¯­æ³•ç³–è¿™ä¹ˆå»è°ƒç”¨ï¼Œlogger(5)(add)(4,5)
</code></pre>

        <!-- åˆ†ç±»æ–‡ç«  -->
        
          <div class="post-categoris-bottom">
            <div class="post-categoris-name">Python</div>
            <ul>
            
            
              
            
            
            
              
            
            
            
              
                <li class="me base">
                  <a  href="/2023/05/17/Python%E8%A3%85%E9%A5%B0%E5%99%A8/" class="post-categoris-bottom-link">
                  Pythonè£…é¥°å™¨ğŸ
                </a>
                </li>
              
              
            
            
            
              
            
            
            
              
            
            
            </ul>

          </div>

        
      </div>
      <div class="post-content-inner-space">
        
          <div class="space-toc-main animate__animated  animate__fadeInUp">
            <ol class="space-toc"><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#Python%E5%B0%8F%E7%99%BD%E6%9D%80%E7%8C%AA%E5%88%80%EF%BC%8C%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="space-toc-text">Pythonå°ç™½æ€çŒªåˆ€ï¼Œè£…é¥°å™¨</span></a></li></ol>
           </div>
        
      </div>
   </div>
    <!-- è¯„è®º -->
    
  </div>
</article>
  </div>
</div>



<!-- å¦‚æœæ˜¯homeæ¨¡å¼çš„è¯ï¼Œä¸åœ¨é¦–é¡µå°±æ˜¾ç¤ºfooterï¼Œå¦‚æœä¸æ˜¯homeæ¨¡å¼çš„è¯ æ‰€æœ‰éƒ½æ˜¾ç¤ºfooter -->

  <div class="footer-outer animate__animated  animate__fadeInUp">
    <div class="footer-inner">
    <div class="footer-text">
    <p>Power by <a target="_blank" rel="noopener" href="http://hexo.io/">Hexo</a> Theme by <a target="_blank" rel="noopener" href="https://github.com/Xw-oorik/xw-oorik.github.io">Pot ba</a></p>

    </div>
    <div class="footer-contact">
    <ul class="footer-ul">
        
        <li class="footer-li">
            <a href="https://github.com/Xw-oorik/xw-oorik.github.io" target="_blank">
                <i class="ri-github-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="mailto:820735157@qq.com" target="_blank">
                <i class="ri-mail-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="https://blog.csdn.net/weixin_51609435?spm=1000.2115.3001.5343" target="_blank">
                <i class="ri-pages-fill"></i>
            </a>
        </li>
        
    </ul>
    </div>
    </div>
</div>






<script src="/js/white.js"></script>



    
      
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>

      <script>hljs.initHighlightingOnLoad();</script>
    

</body>
</html>

<link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css">

<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<script src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"> </script>

<script src="/js/fancybox.js"></script>

